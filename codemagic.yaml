workflows:
  ios-release:
    name: iOS Manual Build

    environment:
      xcode: latest

    scripts:
      - npm install
      - npm run build
      - npx cap sync ios

      - name: Archive
        script: |
          xcodebuild \
          -project ios/App/App.xcodeproj \
          -scheme App \
          -configuration Release \
          -archivePath build/App.xcarchive \
          archive \
          CODE_SIGN_STYLE=Manual

    artifacts:
      - build/App.xcarchive
